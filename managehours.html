<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ShiftScheduler - Coordinator</title>
	<!-- JQuery -->
	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
	integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
	crossorigin="anonymous"></script>
	<!-- AJax -->
	<script src=
	"https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<!-- PopperJS -->
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
	integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
	crossorigin="anonymous"></script>
	<!-- Bootstrap -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
	integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
	crossorigin="anonymous"></script>
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
	integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
	crossorigin="anonymous">
	<!-- FontAwesome -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<!-- Date Picker -->
	<!-- <link href="./bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet"> -->

</head>

<style>
.footer {
	position: fixed;
	bottom: 0;
	width: 100%;
	/* Set the fixed height of the footer here */
	height: 60px;
	line-height: 60px; /* Vertically center the text there */
	background-color: #f5f5f5;
}
</style>

<!-- Navbar -->
<body id="body" class="text-center">
	<nav class="navbar navbar-expand navbar-light bg-light">
		<div class="container">
			<a class="navbar-brand" href="/index">ShiftScheduler
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon">
			</span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false"> {{netid}} </a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="/profile">Profile</a>
						<a class="dropdown-item" href="/logout">Log Out</a>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>

<nav class="container navbar navbar-expand-lg navbar-dark bg-dark">
	<!--  <a class="navbar-brand" href="#">Navbar w/ text</a>-->
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon" ></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarText">
		<ul class="navbar-nav mr-auto">
			<!--      <li class="nav-item active">-->
			<!--        <a class="nav-link" href="#"> Coordinator Page <span class="sr-only">(current)</span></a>-->
			<!--      </li>-->
			<li class="nav-item">
				<a class="nav-link" href="/coordinatorschedule">Shift Schedule</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="/manageemployees">Manage Employees</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="/manageshifts">Manage Shifts</a>
			</li>
			<li class="nav-item">
				<a class="nav-link active" href="/managehours">Manage Hours</a>
			</li>
		</ul>
	</div>
</nav>

<main role="main">
	<br>
	<div class="container">
		<div class="row align-items-center">
			<div class = "col-12">
				<h1>Employee Hours:</h1>
			</div>
		</div>
		<div class="row align-items-center">
			<div class = "col-6">
				<div class="form-group">
					<label>Start Date</label>
					<input type="date" id="startDate" max="3000-12-31" min="1000-01-01" class="form-control">
				</div>
				<div class="form-group">
					<label>End Date</label>
					<input type="date" id="endDate" name="bday" max="3000-12-31" min="1000-01-01" class="form-control">
				</div>
				<button type="button" id="submit" class="btn btn-secondary">Update All Employee Hours for Selected Period</button>
				<span id = "loading">    </span>
			</div>
			<div class="col-6">
				<div id="hours" style="text-align:left">
					Selecting a period on the left will update all employee hours to
					show their hours within the given period. After pressing the
					"Update All Employee Hours for Selected Period" button, it will take
					about one minute for all hours to be updated.
				</div>
			</div>
		</div>
	</div>

	<div id = "report" class = "container" >
		<span id = "reportArea"> </span>
	</div>
	<!-- <div class="container">
	<div class="row">
	<div class='col-sm-6'>
	<div class="form-group">
	<div class='input-group date' id='datetimepicker1'>
	<input type='text' class="form-control" />
	<span class="input-group-addon">
	<span class="glyphicon glyphicon-calendar"></span>
</span>
</div>
</div>
</div>
</div>
</div> -->
</main>

<footer class="footer">
	<div class="container">
		<span class="text-muted">&copy; <a class = "text-dark" href="/team">The ShiftScheduler Team</a> 2020</span>
	</div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>

// let request = null;
// let netid = null;
//
// function addRegularShifts() {
//
// 	$('#insertShift').on('click', function(){
// 		var day = $('#daySelect').val();
// 		var task = $('#taskSelect').val();
// 		var string = $('#toBeAdded').html();
// 		// console.log(string);
// 		string += '<option class="selectThis">' + day + ' ' + task + '</option>';
// 		// console.log(string);
// 		$('#toBeAdded').html(string);
// 		// console.log(day);
// 		// console.log(task);
// 	});
//
// 	$('#insertAllShifts').on('click', function() {
// 		// var string = $('#toBeAdded').html();
// 		var shifts = '';
//
// 		$("option").each(function() {
// 			if ($(this).attr("class") == 'selectThis') {
// 				var shiftName = $(this).val();
//
// 				var split = shiftName.split(' ');
//
// 				var day = split[0];
// 				var task  = '';
// 				for(var i = 1; i < split.length ; i++){
// 					task += split[i];
// 				}
// 				shifts += day.toLowerCase() +"-" + convertTaskId(task)  + "_"
// 			}
// 		});
// 		shifts = encodeURIComponent(shifts);
// 		console.log(netid);
// 		let url = "/assign?netid=" + netid + "&shifts=" + shifts;
//
// 		// console.log(shifts);
// 		if (request != null) {
// 			request.abort();
// 		}
// 		reloadUrl =  "/manageshifts?employee=" + netid;
// 		request = $.ajax(
// 			{
// 				type: "GET",
// 				url: url,
// 				success: window.location = reloadUrl,
// 			}
// 		);
// 	});
// }
//
// function convertTaskId(str){
// 	if (str == 'DinnerManager') taskid = 1;
// 	else  if (str ==  'DinnerFirstShift') taskid = 2;
// 	else if (str == "DinnerSecondShift" ) taskid = 3;
// 	else if (str == 'DinnerDishManager' ) taskid = 4;
// 	else if (str == 'DinnerFirstDish' ) taskid = 5;
// 	else if (str ==  'DinnerSecondDish') taskid = 6;
// 	else if ( str ==  'BrunchManager') taskid = 7;
// 	else if (str ==  'BrunchFirstShift') taskid = 8;
// 	else if(str ==  'BrunchSecondShift') taskid = 9;
// 	else if(str ==  'BrunchDishManager') taskid = 10;
// 	else if(str ==  'BrunchFirstDish') taskid = 11;
// 	else if(str == 'BrunchSecondDish') taskid = 12;
// 	else if( str ==  'CJLSwipe') taskid = 13;
// 	return taskid;
// }
//
// function employeeDetails() {
// 	var employee = $('#employeeDetails').attr('employee');
// 	console.log(employee);
// 	$('#employeeDetails').load('/employeeShiftDetails?netid=' + employee);
// 	if (employee != '') {
// 		$('#assignShiftForm').attr('style', "visibility:visible");
// 	}
// 	$('.employeeItem').on('click',function() {
// 		url = $(this).attr('link');
// 		$('#employeeDetails').load(url);
// 		$('#assignShiftForm').attr('style', "visibility:visible");
// 		netid = $(this).attr('netid');
// 		console.log(netid);
// 	});
// }

function getDates() {
	$('#submit').on('click', function() {
		$("#loading").text("Loading...");
		console.log($('#startDate').val());
		console.log($('#endDate').val());
		url = '/allhours?startDate=' + $('#startDate').val() + '&endDate=' + $('#endDate').val();
		request = $.ajax(
					{
						type: "GET",
						url: url,
						success: function(data) {
							$("#loading").text("Report Generated");
							$("#reportArea").html(data);
						}
					}
				);
	});
}

function setup() {
	getDates();
	// employeeDetails();
	// addRegularShifts();
}

$('document').ready(setup);
</script>

</body>
</html>
