<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ShiftScheduler - Employee</title>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js">
      </script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


</head>
<style>
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  /* Set the fixed height of the footer here */
  height: 60px;
  line-height: 60px; /* Vertically center the text there */
  background-color: #f5f5f5;
}

</style>

<body class="text-center">

    <nav class="navbar navbar-expand navbar-light bg-light">
        <div class="container">
      <a class="navbar-brand" href="/">ShiftScheduler</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false"> {{netid}} </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <a class="dropdown-item" href="/profile">Profile</a>
                      <a class="dropdown-item" href="#">Log Out</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
            </nav>

<main role="main">
    <div class="container">
        <br>
        <h1>This Week's Calendar:</h1>
        <br>
        <br>
      <table align="center" border="5" cellpadding="10" cellspacing="5">
         <tr>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th>Saturday</th>
            <th>Sunday</th>
         </tr>
         <tr>
            <td id="monDate">{{monday.strftime("%B %d")}}</td>
            <td id="tuesDate">{{tuesday.strftime("%B %d")}}</td>
            <td id ="wedDate">{{wednesday.strftime("%B %d")}}</td>
            <td id ="thursDate">{{thursday.strftime("%B %d")}}</td>
            <td id="friDate">{{friday.strftime("%B %d")}}</td>
            <td id="satDate">{{saturday.strftime("%B %d")}}</td>
            <td id="sunDate">{{sunday.strftime("%B %d")}}</td>
         </tr>
         <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <!--Saturday Brunch-->
            <td id="satBrunch">
               <a class="manager" id="satBrunchManager" href = '/shiftdetails?date=2020-03-28&taskid=7'> Manager</a>
               <br><a id="satFirstBrunch" href = '/shiftdetails?date=2020-03-28&taskid=8'> First Brunch</a>
               <br><a id="satSecondBrunch" href = '/shiftdetails?date=2020-03-28&taskid=9'> Second Brunch</a>
            </td>
            <!--Sunday Brunch-->
            <td id="sunBrunch">
               <a class="manager" id="sunBrunchManager" href = '/shiftdetails?date=2020-03-29&taskid=7'> Manager</a>
               <br><a id="sunFirstBrunch" href = '/shiftdetails?date=2020-03-29&taskid=8'> First Brunch</a>
               <br><a id="sunSecondBrunch" href = '/shiftdetails?date=2020-03-29&taskid=9'> Second Brunch</a>
            </td>
         </tr>

         <tr>
            <!--Monday Dinner-->
            <td id="monDinner">
                <div class="list-group">
                    <button id = "monDinnerManager" type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop">
 monDinner
</button>
<!--                  <a href="#" id="monDinnerManager" class="list-group-item list-group-item-action list-group-item-info" data-container="body" data-toggle="modal"-->
<!--                         data-placement="top"  > Manager </a>-->
<!--                <script>-->
<!--                     console.log("heeey");-->
<!--                    $('#monDinnerManager').popover({-->
<!--                        "html": true,-->
<!--                         "content": "asdasjdna"-->
<!--                });-->
<!--                </script>-->
                  <a href="#" id="monFirstDinner" class="list-group-item list-group-item-action list-group-item-light" data-container="body" data-toggle="popover"
                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">First Dinner</a>
                  <a href="#" id="monSecondDinner" class="list-group-item list-group-item-action list-group-item-light" data-container="body" data-toggle="popover"
                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">Second Dinner</a>
                </div>
                <div class="modal fade" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p id = "bodyModal"></p>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>
<!--                <button type="button" id="monDinnerManager" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  Manager-->
<!--                </button><br>-->
<!--                <button type="button" id="monFirstDinner" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  First Dinner-->
<!--                </button><br>-->
<!--                <button type="button" id="monSecondDinner" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  Second Dinner-->
<!--                </button><br>-->
<!--                <button type="button" id="monDishManager" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  Dish Manager-->
<!--                </button><br>-->
<!--                <button type="button" id="monFirstDish" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  First Dish-->
<!--                </button><br>-->
<!--                <button type="button" id="monSecondDish" class="btn btn-secondary" data-container="body" data-toggle="popover"-->
<!--                        data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">-->
<!--                  Second Dish-->
<!--                </button><br>-->
<!--               <a href = '/shiftdetails?date=2020-03-23&taskid=1'> Manager</a>-->
<!--               <br><a href = '/shiftdetails?date=2020-03-23&taskid=2'> First Dinner</a>-->
<!--               <br><a href = '/shiftdetails?date=2020-03-23&taskid=3'> Second Dinner</a>-->
<!--               <br><a href = '/shiftdetails?date=2020-03-23&taskid=4'> Dish Manager</a>-->
<!--               <br><a href = '/shiftdetails?date=2020-03-23&taskid=5'> First Dish</a>-->
<!--               <br><a href = '/shiftdetails?date=2020-03-23&taskid=6'> Second Dish</a>-->
            </td>
            <!--Tuesday Dinner-->
            <td id="tuesDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
            <!--Wednesday Dinner-->
            <td id="wedDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
            <!--Thursday Dinner-->
            <td id="thursDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
            <!--Friday Dinner-->
            <td id="friDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
            <!--Saturday Dinner-->
            <td id="satDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
            <!--Sunday Dinner-->
            <td id="sunDinner">Manager<br>First Dinner<br>Second Dinner<br>Dish Manager<br>First Dish<br>Second Dish</td>
         </tr>
      </table>

      <br>
      <strong>{{errorMsg}}</strong>
    </div>
</main>


    <footer class="footer">
      <div class="container">
          <span class="text-muted">&copy; <a class = "text-dark" href="/team">The ShiftScheduler Team</a> 2020</span>
      </div>
    </footer>



    <script>


        function getDates() {
            let today = new Date();
            let dotw = today.getDay();
            mon = today.getDate() - dotw + 1;
            let week = [];
            let current = new Date();
            current.setDate(mon);
            for (var i = 0; i < 7; i++) {
                week.push(new Date(+current));
                current.setDate(current.getDate()+1);
            }
            console.log('hello')
            $('#monDate').html(week[0].toLocaleDateString());
            $('#tuesDate').html(week[1].toLocaleDateString());
            $('#wedDate').html(week[2].toLocaleDateString());
            $('#thursDate').html(week[3].toLocaleDateString());
            $('#friDate').html(week[4].toLocaleDateString());
            $('#satDate').html(week[5].toLocaleDateString());
            $('#sunDate').html(week[6].toLocaleDateString());
        }

              function handleResponse(response) {
                     $('#bodyModal').html(response);
                }

                let request = null;

                function getDetails()
                {

                    let url = '/shiftdetails' ;
                    if (request != null)
                        request.abort();
                        request = $.ajax({
                            type: "GET",
                            url: url,
                            success: handleResponse
                    }
                    );
                }

              // $('#monDinnerManager').popover({
              //           "html": true,
              //             "content": askdlad,
                  //    function(){
                     //        console.log("here???");
                     //        return details_in_popup();
                     // }
                //     });
                //
                // function details_in_popup(){
                //     $.ajax({
                //         type: "GET",
                //         url: '/shiftdetails',
                //         success: function(response){
                //             $(#monDinnerManager).html(response);
                //      }
                //     });
                //     return '<div id=monDinnerManagaer>Loading...</div>';
                //     }

        function enablePopovers() {
            $('#monDinnerManager').popover();
            $('#monFirstDinner').popover();
            $('#monSecondDinner').popover();
            $('#monDishManager').popover();
            $('#monFirstDish').popover();
            $('#monSecondDish').popover();
        }

         // $('#monDinnerManager').popover({
         //     "html": true,
         //     "data-content": getDetails()
         // });

        function setup() {

            getDates();
            enablePopovers();
        }
        function ready(){
            $(#monDinnerManager).on('click' , getDetails());
        }


        $('document').ready(setup);

    </script>

</body>
</html>